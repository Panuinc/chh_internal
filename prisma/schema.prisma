generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum employeeStatus {
  Active
  Inactive
}

enum accountStatus {
  Active
  Inactive
}

enum PermissionStatus {
  Active
  Inactive
}

model Employee {
  employeeId        String         @id @default(cuid())
  employeeFirstName String
  employeeLastName  String
  employeeEmail     String         @unique
  employeeStatus    employeeStatus @default(Active)
  employeeCreatedBy String?
  employeeCreatedAt DateTime?
  employeeUpdatedBy String?
  employeeUpdatedAt DateTime?

  createdByEmployee Employee? @relation("EmployeeCreatedBy", fields: [employeeCreatedBy], references: [employeeId])
  updatedByEmployee Employee? @relation("EmployeeUpdatedBy", fields: [employeeUpdatedBy], references: [employeeId])

  createdEmployees Employee[] @relation("EmployeeCreatedBy")
  updatedEmployees Employee[] @relation("EmployeeUpdatedBy")

  account Account?

  assigns Assign[]

  createdAccounts Account[] @relation("AccountCreatedBy")
  updatedAccounts Account[] @relation("AccountUpdatedBy")

  createdAssigns Assign[] @relation("AssignCreatedBy")
  updatedAssigns Assign[] @relation("AssignUpdatedBy")

  createdPermissions Permission[] @relation("PermissionCreatedBy")
  updatedPermissions Permission[] @relation("PermissionUpdatedBy")

  @@index([employeeCreatedBy])
  @@index([employeeUpdatedBy])
}

model Account {
  accountId         String                @id @default(cuid())
  accountEmployeeId String                @unique
  accountUsername   String
  accountPassword   String
  accountPinNumber  String?
  accountStatus     accountStatus @default(Inactive)
  accountCreatedBy  String?
  accountCreatedAt  DateTime?
  accountUpdatedBy  String?
  accountUpdatedAt  DateTime?

  accountEmployee Employee @relation(fields: [accountEmployeeId], references: [employeeId])

  createdByEmployee Employee? @relation("AccountCreatedBy", fields: [accountCreatedBy], references: [employeeId])
  updatedByEmployee Employee? @relation("AccountUpdatedBy", fields: [accountUpdatedBy], references: [employeeId])

  @@index([accountCreatedBy])
  @@index([accountUpdatedBy])
}

model Assign {
  assignId           String    @id @default(cuid())
  assignEmployeeId   String
  assignPermissionId String
  assignCreatedBy    String?
  assignCreatedAt    DateTime?
  assignUpdatedBy    String?
  assignUpdatedAt    DateTime?

  employee Employee @relation(fields: [assignEmployeeId], references: [employeeId])

  permission Permission @relation(fields: [assignPermissionId], references: [permissionId])

  createdByEmployee Employee? @relation("AssignCreatedBy", fields: [assignCreatedBy], references: [employeeId])
  updatedByEmployee Employee? @relation("AssignUpdatedBy", fields: [assignUpdatedBy], references: [employeeId])

  @@index([assignEmployeeId])
  @@index([assignPermissionId])
  @@index([assignCreatedBy])
  @@index([assignUpdatedBy])
}

model Permission {
  permissionId        String           @id @default(cuid())
  permissionName      String           @unique
  permissionStatus    PermissionStatus @default(Active)
  permissionCreatedBy String?
  permissionCreatedAt DateTime?
  permissionUpdatedBy String?
  permissionUpdatedAt DateTime?

  assigns Assign[]

  createdByEmployee Employee? @relation("PermissionCreatedBy", fields: [permissionCreatedBy], references: [employeeId])
  updatedByEmployee Employee? @relation("PermissionUpdatedBy", fields: [permissionUpdatedBy], references: [employeeId])

  @@index([permissionCreatedBy])
  @@index([permissionUpdatedBy])
}
