generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "mysql"
}

enum empStatus {
  Active
  Inactive
}

enum empAccStatus {
  Active
  Inactive
}

enum PermStatus {
  Active
  Inactive
}

model Emp {
  empId        String    @id @default(cuid())
  empFirstName String
  empLastName  String
  empEmail     String    @unique
  empStatus    empStatus @default(Active)
  empCreatedBy String?
  empCreatedAt DateTime?
  empUpdatedBy String?
  empUpdatedAt DateTime?

  createdByEmp Emp? @relation("EmpCreatedBy", fields: [empCreatedBy], references: [empId])
  updatedByEmp Emp? @relation("EmpUpdatedBy", fields: [empUpdatedBy], references: [empId])

  createdEmps Emp[] @relation("EmpCreatedBy")
  updatedEmps Emp[] @relation("EmpUpdatedBy")

  empAcc EmpAcc?

  empPerms EmpPerm[]

  createdEmpAccs EmpAcc[] @relation("EmpAccCreatedBy")
  updatedEmpAccs EmpAcc[] @relation("EmpAccUpdatedBy")

  createdEmpPerms EmpPerm[] @relation("EmpPermCreatedBy")
  updatedEmpPerms EmpPerm[] @relation("EmpPermUpdatedBy")

  createdPerms Perm[] @relation("PermCreatedBy")
  updatedPerms Perm[] @relation("PermUpdatedBy")

  @@index([empCreatedBy])
  @@index([empUpdatedBy])
}

model EmpAcc {
  empAccId        String       @id @default(cuid())
  empAccEmpId     String       @unique
  empAccUsername  String
  empAccPassword  String
  empAccPinNumber String?
  empAccStatus    empAccStatus @default(Inactive)
  empAccCreatedBy String?
  empAccCreatedAt DateTime?
  empAccUpdatedBy String?
  empAccUpdatedAt DateTime?

  empAccEmp Emp @relation(fields: [empAccEmpId], references: [empId])

  createdByEmp Emp? @relation("EmpAccCreatedBy", fields: [empAccCreatedBy], references: [empId])
  updatedByEmp Emp? @relation("EmpAccUpdatedBy", fields: [empAccUpdatedBy], references: [empId])

  @@index([empAccCreatedBy])
  @@index([empAccUpdatedBy])
}

model EmpPerm {
  empPermId        String    @id @default(cuid())
  empPermEmpId     String
  empPermPermId    String
  empPermCreatedBy String?
  empPermCreatedAt DateTime?
  empPermUpdatedBy String?
  empPermUpdatedAt DateTime?

  emp Emp @relation(fields: [empPermEmpId], references: [empId])

  perm Perm @relation(fields: [empPermPermId], references: [permId])

  createdByEmp Emp? @relation("EmpPermCreatedBy", fields: [empPermCreatedBy], references: [empId])
  updatedByEmp Emp? @relation("EmpPermUpdatedBy", fields: [empPermUpdatedBy], references: [empId])

  @@index([empPermEmpId])
  @@index([empPermPermId])
  @@index([empPermCreatedBy])
  @@index([empPermUpdatedBy])
}

model Perm {
  permId        String     @id @default(cuid())
  permName      String     @unique
  permStatus    PermStatus @default(Active)
  permCreatedBy String?
  permCreatedAt DateTime?
  permUpdatedBy String?
  permUpdatedAt DateTime?

  empPerms EmpPerm[]

  createdByEmp Emp? @relation("PermCreatedBy", fields: [permCreatedBy], references: [empId])
  updatedByEmp Emp? @relation("PermUpdatedBy", fields: [permUpdatedBy], references: [empId])

  @@index([permCreatedBy])
  @@index([permUpdatedBy])
}
